---
// Despliegue.astro
const { icon, menuItems = [] } = Astro.props;
---

<div class="relative group">
  <button class="p-2 text-primaryText-light dark:text-primaryText-dark">
    <slot /> <!-- Aquí va el ícono que envíes desde el layout -->
  </button>

  <ul class="absolute top-full mt-2 bg-white dark:bg-gray-800 text-sm text-black dark:text-white shadow-md rounded-lg py-2 w-40 hidden group-hover:block z-50">
    {menuItems.map((item) => (
      <li class="relative group/menu-item">
        <a href={item.href} class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2">
          {item.icon && <item.icon class="w-4 h-4" />}
          {item.label}
        </a>

        {item.submenu && item.submenu.length > 0 && (
          <ul class="absolute left-full top-0 bg-white dark:bg-gray-800 shadow-md rounded-lg py-2 w-40 hidden group-hover/menu-item:block">
            {item.submenu.map((sub) => (
              <li>
                <a href={sub.href} class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2">
                  {sub.icon && <sub.icon class="w-4 h-4" />}
                  {sub.label}
                </a>
              </li>
            ))}
          </ul>
        )}
      </li>
    ))}
  </ul>
</div>
